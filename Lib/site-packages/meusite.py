from flask import Flask, render_template, url_for, request
import mysql.connector as mysql



app = Flask(__name__)

# Criar a primeira pagina do site
#   route  -> link, caminho onde se encontra a pagina em questão
#   função -> O que voce quer exibir naquela página.    
#   Templete
@app.route("/") 
def homepage():
    return render_template("homepage.html")


@app.route("/acompanhe")
def acompanhe():
    return render_template("acompanhe.html")


@app.route("/cadastro")
def cadastro():
    return render_template("cadastro.html")

@app.route("/fotos")
def fotos():
    return render_template("fotos.html")

@app.route("/sobre")
def sobre():
    return render_template("sobre.html")


@app.route("/conectarBanco",methods=['POST','GET'])
#Executa instrução SQL no banco de dados
def conectarBanco():
    
    nome     = request.form['nome']
    endereco = request.form['endereco']
    complemento = request.form['complemento']
    bairro = request.form['bairro']
    cep = request.form['cep']
    cidade = request.form['cidade']
    estado = request.form['estado']
    naturalidade = request.form['naturalidade']
    dataNascimento = request.form['dataNascimento']
    estadoCivil = request.form['estadoCivil']
    sexo = request.form['sexo']
    escolaridade = request.form['escolaridade']
    profissao = request.form['profissao']
    renda = request.form['renda']
    telefone = request.form['telefone']
    celular = request.form['celular']
    telRecado = request.form['telRecado']
    email = request.form['email']
    facebook = request.form['facebook']
    nis = request.form['nis']
    rg = request.form['rg']
    cpf = request.form['cpf']
    titulo = request.form['titulo']
    zonaEleitoral = request.form['zonaEleitoral']
    sessaoEleitoral = request.form['sessaoEleitoral']
    moradia = request.form['moradia']

    SQL  = "INSERT INTO titular (nome, endereco, complemeto, bairro, cep, cidade, estado, naturalidade," 
    SQL += "data_nasc, estado_civil, sexo, escolaridade, profissao, renda, telefone," 
    SQL += "celular, telefone_rec, e_mail, facebook, nis, rg, cpf, titulo, zona, secao, moradia) " 
    SQL += "VALUES ('"+str(nome)+"', '"+str(endereco)+"', '"+str(complemento)+"', '"+str(bairro)+"', '"+str(cep)+"', '"+str(cidade)+"', '"+str(estado)+"', "
    SQL += "'"+str(naturalidade)+"', '"+str(dataNascimento)+"', '"+str(estadoCivil)+"', '"+str(sexo)+"', '"+str(escolaridade)+"', '"+str(profissao)+"', "
    SQL += "'"+str(renda)+"', '"+str(telefone)+"', '"+str(celular)+"', '"+str(telRecado)+"', '"+str(email)+"', '"+str(facebook)+"', '"+str(nis)+"', '"+str(rg)+"', "
    SQL += "'"+str(cpf)+"', '"+str(titulo)+"', '"+str(zonaEleitoral)+"', '"+str(sessaoEleitoral)+"', '"+str(moradia)+"')"

    #return '<p>'+SQL+'</p>'


    conn = mysql.connect(host='localhost',
                    user='root',
                    password='**********',
                    db='cadastro_ong',
                    charset='utf8',
                    connect_timeout=600,
                    compress=True)
    
    c = conn.cursor(dictionary=True)
    c.execute(SQL)
    conn.commit()

    c.close()
    conn.close()
    return render_template("/homepage.html")
    

















# Executa somente se estiver rodando o site através destes arquivo
if __name__ == "__main__":
    app.run(debug=True)